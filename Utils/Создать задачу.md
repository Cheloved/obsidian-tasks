---
Проект: "[[Проекты/Настройка связи.md|Настройка связи]]"
Название: Тестовая задача
Участники:
  - "[[Участники/Зам.md|Зам]]"
  - "[[Участники/Старлей.md|Старлей]]"
Начало: 2025-04-22
Дедлайн: 2025-04-23
Статус: Активна
Приоритет: 4
---

```dataviewjs


let proj_options = dv.pages('"Проекты"')
				   .where(p => p['filetype'] == "project")
				   .map(p => "option(" + p.file.link + ")")
				   .join(", ");
				   
let role_options = dv.pages('"Участники"')
				   .map(p => "option(" + String(p.file.link) + ")")
				   .join(", ");

const project  = `\`INPUT[inlineSelect(`+proj_options+`):Проект]\``;
const name     = `\`INPUT[text:Название]\``;
const assigned = `\`INPUT[inlineListSuggester(`+role_options+`):Участники]\``;
const start    = `\`INPUT[date:Начало]\``;
const due      = `\`INPUT[date:Дедлайн]\``;
const status   = `\`INPUT[inlineSelect(option(Сделать), option(Активна), option(Завершена)):Статус]\``
const priority = `\`INPUT[progressBar(maxValue(5), minValue(0)):Приоритет]\``

dv.header(3, "Создание задачи:");
dv.paragraph("Проект: "     + project);
dv.paragraph("Название: "   + name);
dv.paragraph("Участники: "  + assigned);
dv.paragraph("Начало: "     + start);
dv.paragraph("Завершение: " + due);
dv.paragraph("Статус: "     + status);
dv.paragraph("Приоритет:  ");
```
```meta-bind
INPUT[progressBar(maxValue(5), minValue(0)):Приоритет]
```
```dataviewjs
const filename = dv.current()["Название"]
const type     = filename + "#filetype"
const project  = filename + "#Проект"
const name     = filename + "#Название"
const assigned = filename + "#Участники"
const start    = filename + "#Начало"
const due      = filename + "#Дедлайн"
const status   = filename + "#Статус"
const priority = filename + "#Приоритет"

const button  = `\`\`\`meta-bind-button 
label: "Создать!"
style: primary
id: "create-task-btn"
hidden: false
actions:
  - type: createNote
    folderPath: "Задачи"
    fileName: `+filename+`
    openNote: true
  - type: updateMetadata
    bindTarget: `+type+`
    evaluate: false
    value: "task"
  - type: updateMetadata
    bindTarget: `+project+`
    evaluate: true
    value: "getMetadata('Проект')"
  - type: updateMetadata
    bindTarget: `+name+`
    evaluate: true
    value: "getMetadata('Название')"
  - type: updateMetadata
    bindTarget: `+assigned+`
    evaluate: true
    value: "getMetadata('Участники')"
  - type: updateMetadata
    bindTarget: `+start+`
    evaluate: true
    value: "getMetadata('Начало')"
  - type: updateMetadata
    bindTarget: `+due+`
    evaluate: true
    value: "getMetadata('Дедлайн')"
  - type: updateMetadata
    bindTarget: `+status+`
    evaluate: true
    value: "getMetadata('Статус')"
  - type: updateMetadata
    bindTarget: `+priority+`
    evaluate: true
    value: "getMetadata('Приоритет')"
\`\`\``;

dv.paragraph(button);
```

